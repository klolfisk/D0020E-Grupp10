<!DOCTYPE html>
<html>
	<head>

		<script type="text/javascript" src="js/angular.min.js"></script> 
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Raleway" />

	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	    <meta name="description" content="">

	    <!-- Bootstrap core CSS -->
	    <link href="css/bootstrap.min.css" rel="stylesheet">
	    <link href="css/bootstrap.css" rel="stylesheet">

	    <link href="css/style.css" rel="stylesheet">
	    <script src="js/jquery-3.1.1.min.js"></script>
	    <script src="js/jquery-ui.js"></script>


		<script>
		// Kinda weird that "newServer" starts a container. Demo though.
		var serverCount = 0;

			function stop() {
				$.ajax({
					url: "http://127.0.0.1:4243/containers/sad_morse/stop",
					crossDomain: true,
					dataType: "json",
					type: "POST",
					success: function(data) {
						alert("stopped sad_morse");
					},
				});
			};

			function start() {
				$.ajax({
					url: "http://127.0.0.1:4243/containers/sad_morse/start",
					crossDomain: true,
					dataType: "json",
					type: "POST",
					success: function(data) {
						alert("started sad_morse");
					},
				});
			};

			function getAll() {
				$.ajax({
					url: "http://127.0.0.1:4243/containers/json?all=1",
					crossDomain: true,
					dataType: "json",
					type: "GET",
					success: function(a, status) {
						console.log(a.responseJSON);
						alert("sucess");
					},
					error: function(a, status) {
						console.log(a.responseJSON);
					}
				});
			};
			$(function(){
			  $(".newServer").draggable({
	        cursor: "move",
	        containment: "window",
	        helper: function() {
	        	return $(this).clone().appendTo("body");
	        }
				});

				$('#main-content').droppable({
					tolerance: 'fit',
	        drop: function(event, ui) {
	        	if( $(ui.draggable).hasClass("newServer")) {
	        		serverCount++;
		        	var box = $("<div/>", { class: "draggable", text: "Server "+serverCount, id:"server"+serverCount}).append("<a href='#' class='remove'>X</a>").draggable({
		        		revert: "invalid",
						    grid: [310,310],
						    stop: function(){
						      $(this).draggable("option", "revert", "invalid");
					    	}
		        	}).droppable({
		        		greedy: true,
						    tolerance: 'touch',
						    drop: function(event,ui){
						      ui.draggable.draggable('option','revert',true);
						    }
		        	});
		        	
		       	}
		        $("#main-content").append(box);
	        	start();
	        }
			  });

				$(document).on("click", ".remove", function() {
		    	$(this).parent().remove();
		    	stop();
				});

			});

 		 </script>

	    <title></title>

	</head>
	<body>

<header>
	<div class="navbar navbar-default navbar-fixed-top navbar-offset" id="topbar">
		<img src="https://d3nmt5vlzunoa1.cloudfront.net/phpstorm/files/2015/10/large_v-trans.png"><h4> File Edit Arrange Extras Help</h4>
	</div>
</header>
<div class="container container-fluid scrollable">
    <div class="row">
        <div id="sidebar" class="col-md-2 no-float"><h3>Commands</h3>

        	<ul class="nav nav-stacked">
					  <li role="presentation" class="newServer move"><a>+ Server</a></li>
					  <li role="presentation" class="move"><a>+ Container</a></li>
					</ul>

        </div>
        <div id="main-content" class="col-md-10 no-float">
        		
        </div>
    </div>
</div>
</body>
</html>
